<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      <ion-icon name="journal"></ion-icon>
      Journal Entries
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form #journalForm="ngForm" (ngSubmit)="addJournalEntry(); journalForm.reset();">
  <ion-row class="ion-margin">
    <ion-col size="3" size-xs="12" size-sm="6" size-md="3">
    <ion-item>
      <ion-label>Cost Center</ion-label>
      <ion-select name="project" [(ngModel)]="this.costCenterId" placeholder="Select Cost Center">
        <ion-select-option disabled>Projects</ion-select-option>
        <ion-select-option *ngFor="let project of costCenter.projects" [value]="project.id">{{project | costcenterOwner}}</ion-select-option>
        <ion-select-option disabled>Cost Center</ion-select-option>
        <ion-select-option *ngFor="let nonProfit of costCenter.nonProfits" [value]="nonProfit.id">{{nonProfit | costcenterOwner}}</ion-select-option>
      </ion-select>
    </ion-item>
    </ion-col>
    <ion-col size="3" size-xs="12" size-sm="6" size-md="3">
    <ion-item>
      <ion-label>Sending Account</ion-label>
      <ion-select name="sendingAccount" [(ngModel)]="this.sendingAccountId" placeholder="Sending Account">
        <ion-select-option disabled>Bank Accounts</ion-select-option>
        <ion-select-option *ngFor="let bankAccount of accounts.bankAccounts" [value]="bankAccount.id">{{bankAccount | accountOwner}}</ion-select-option>
        <ion-select-option disabled>Cash Accounts</ion-select-option>
        <ion-select-option *ngFor="let cashAccount of accounts.cashAccounts" [value]="cashAccount.id">{{cashAccount | accountOwner}}</ion-select-option>
      </ion-select>
    </ion-item>
    </ion-col>
    <ion-col size="3" size-xs="12" size-sm="6" size-md="3">
    <ion-item>
      <ion-label>Receiving Account</ion-label>
      <ion-select name="receivingAccount" [(ngModel)]="this.receivingAccountId" placeholder="Receiving Account">
        <ion-select-option disabled>Bank Accounts</ion-select-option>
        <ion-select-option *ngFor="let bankAccount of accounts.bankAccounts" [value]="bankAccount.id">{{bankAccount | accountOwner}}</ion-select-option>
        <ion-select-option disabled>Cash Accounts</ion-select-option>
        <ion-select-option *ngFor="let cashAccount of accounts.cashAccounts" [value]="cashAccount.id">{{cashAccount | accountOwner}}</ion-select-option>
      </ion-select>
    </ion-item>
    </ion-col>
    <ion-col size="3" size-xs="12" size-sm="6" size-md="3">
    <ion-item>
      <ion-label position="floating">Transferred Amount</ion-label>
      <ion-input name="transferredAmount" [(ngModel)]="this.transferredAmount"
      type="number"></ion-input>
    </ion-item>
    </ion-col>
    <ion-col size="3" size-xs="12" size-sm="6" size-md="3">
    <ion-item>
      <ion-label>Entry Type</ion-label>
      <ion-select name="typeOfEntry" [(ngModel)]="typeOfEntry" placeholder="Select Entry Type">
        <ion-select-option *ngFor="let entryType of entryTypes" [value]="entryType.id">{{entryType.value}}</ion-select-option>
      </ion-select>
    </ion-item>
    </ion-col>
    <ion-col size="3" size-xs="12" size-sm="6" size-md="3">
    <ion-item>
      <ion-label>Particulars</ion-label>
      <ion-input name="particulars" [(ngModel)]="particulars" type="text" placeholder="Narration"></ion-input>
    </ion-item>
    </ion-col>
    <ion-col size="3" size-xs="12" size-sm="6" size-md="3">
      <ion-button expand="full" [disabled]="!journalForm.valid" type="submit">Add Journal Entry</ion-button>
    </ion-col>
  </ion-row>
  </form>
  <!-- size-xs="12" size-sm="6" size-md="4" size-lg="3" -->
  <ion-grid class="table-style" *ngIf="journalEntries" fixed>
    <ion-row class="header">
      <ion-col size="1">Date</ion-col>
      <ion-col size="1">Cost Center</ion-col>
      <ion-col size="2">Sending Account</ion-col>
      <ion-col size="2">Receiving Account</ion-col>
      <ion-col size="3">Transferred Amount</ion-col>
      <ion-col size="3">Particulars</ion-col>
    </ion-row>
    <ion-row class="body" *ngFor="let journalEntry of journalEntries">
    <!-- (click)="presentPopover(bankAccount)" -->
      <ion-col size="1">{{journalEntry.date | date}}</ion-col>
      <!-- TODO: Convert to actual accounts and project -->
      <ion-col size="1">{{
        getCostCenterById(journalEntry.costCenterId) | costcenterOwner
      }}</ion-col>
      <ion-col size="2">{{
          getAccountById(journalEntry.sendingAccountId) | accountOwner
      }}</ion-col>
      <ion-col size="2">{{
          getAccountById(journalEntry.receivingAccountId) | accountOwner
      }}</ion-col>
      <ion-col size="3">{{journalEntry.transferredAmount}}</ion-col>
      <ion-col size="3">{{journalEntry.particulars}}</ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
